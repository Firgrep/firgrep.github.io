<!DOCTYPE html><html lang="en" class="scroll-smooth"> <head><meta charset="UTF-8"><meta name="description" content="Personal website of Filip Niklas: philosopher, poet and programmer."><meta name="viewport" content="width=device-width"><meta name="author" content="Filip Niklas"><meta name="keywords" content="Filip Niklas, poetry, philosophy, art, history, economy, programming, ideas, metaphysics"><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/static/images/blue.jpg" as="image"><link rel="preload" href="/static/images/gold.jpg" as="image"><link rel="preload" href="/static/images/gold2.jpg" as="image"><link rel="preload" href="/static/images/green.jpg" as="image"><link rel="preload" href="/static/images/purple.jpg" as="image"><link rel="preload" href="/static/images/purple2.webp" as="image"><link rel="preload" href="/static/assets/poetry/saedah.webp" as="image"><link rel="preload" href="/static/assets/poetry/songs-of-destruction-and-redemption.webp" as="image"><link rel="preload" href="/static/assets/poetry/sourcehood.webp" as="image"><meta name="generator" content="Astro v4.16.18"><meta property="og:title" content="FN | Rust Ownership"><meta property="og:description" content="Personal website of Filip Niklas, showcasing projects in philosophy, poetry, programming and economy."><meta property="og:type" content="website"><meta property="og:url" content="https://filipniklas.com/programming/scriptbook/rust-ownership/"><meta property="og:image" content="https://filipniklas.com/fn_four.png"><title>FN | Rust Ownership</title><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/cv.DKxZTg7i.css">
<style>.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}
</style>
<link rel="stylesheet" href="/_astro/_slug_.CNdtd-Ut.css">
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0;mix-blend-mode:plus-lighter}to{opacity:1;mix-blend-mode:plus-lighter}}@keyframes astroFadeOut{0%{opacity:1;mix-blend-mode:plus-lighter}to{opacity:0;mix-blend-mode:plus-lighter}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style><script type="module" src="/_astro/hoisted.8jYSNp64.js"></script><style>[data-astro-transition-scope="astro-qtsawvgs-1"] { view-transition-name: astro-qtsawvgs-1; }@layer astro { ::view-transition-old(astro-qtsawvgs-1) { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }::view-transition-new(astro-qtsawvgs-1) { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back]::view-transition-old(astro-qtsawvgs-1) { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back]::view-transition-new(astro-qtsawvgs-1) { 
	animation-name: astroFadeIn, astroSlideFromLeft; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-qtsawvgs-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-qtsawvgs-1"] { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-qtsawvgs-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-qtsawvgs-1"] { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-qtsawvgs-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-qtsawvgs-1"] { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-qtsawvgs-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-qtsawvgs-1"] { 
	animation-name: astroFadeIn, astroSlideFromLeft; }</style><style>[data-astro-transition-scope="astro-dnezuqfu-2"] { view-transition-name: scriptbook; }@layer astro { ::view-transition-old(scriptbook) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(scriptbook) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(scriptbook) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(scriptbook) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-dnezuqfu-2"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-dnezuqfu-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-dnezuqfu-2"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-dnezuqfu-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-dnezuqfu-2"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-dnezuqfu-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-dnezuqfu-2"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-dnezuqfu-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-bmxrwhcs-3"] { view-transition-name: card1; }@layer astro { ::view-transition-old(card1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(card1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(card1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(card1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-bmxrwhcs-3"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-bmxrwhcs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-bmxrwhcs-3"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-bmxrwhcs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-bmxrwhcs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-bmxrwhcs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-bmxrwhcs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-bmxrwhcs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-bmxrwhcs-4"] { view-transition-name: card2; }@layer astro { ::view-transition-old(card2) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(card2) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(card2) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(card2) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-bmxrwhcs-4"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-bmxrwhcs-4"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-bmxrwhcs-4"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-bmxrwhcs-4"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-bmxrwhcs-4"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-bmxrwhcs-4"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-bmxrwhcs-4"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-bmxrwhcs-4"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-bmxrwhcs-5"] { view-transition-name: card3; }@layer astro { ::view-transition-old(card3) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(card3) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(card3) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(card3) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-bmxrwhcs-5"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-bmxrwhcs-5"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-bmxrwhcs-5"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-bmxrwhcs-5"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-bmxrwhcs-5"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-bmxrwhcs-5"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-bmxrwhcs-5"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-bmxrwhcs-5"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-bmxrwhcs-6"] { view-transition-name: card4; }@layer astro { ::view-transition-old(card4) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(card4) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(card4) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(card4) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-bmxrwhcs-6"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-bmxrwhcs-6"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-bmxrwhcs-6"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-bmxrwhcs-6"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-bmxrwhcs-6"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-bmxrwhcs-6"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-bmxrwhcs-6"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-bmxrwhcs-6"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body class="relative flex flex-col h-screen overflow-y-scroll custom-main-scrollbar text-slate-800"> <nav class="flex justify-center p-1 gap-4 w-full shadow-lg z-20 bg-gradient-to-r from-pink-700/95 to-rose-900"> <a href="/" class="hidden lg:block absolute left-[50px] top-[10px] text-neutral-50 text-lg font-semibold after:bg-neutral-50 after:absolute after:h-[2px] after:w-0 after:bottom-0 after:left-0 hover:after:w-full after:transition-all after:duration-300 cursor-pointer">/filipniklas</a> <div class="screen p-4 flex justify-center items-center z-10 rounded-md h-14 w-52 screen-bg-nav colors-card-1" id="card1" data-astro-cid-gx5ugnmk data-astro-transition-scope="astro-bmxrwhcs-3"> <div class="screen-image-north" data-astro-cid-gx5ugnmk></div> <div class="" data-astro-cid-gx5ugnmk></div> <div class="" data-astro-cid-gx5ugnmk> <!-- <i class="screen-icon">ICON</i> --> <div class="screen-user" data-astro-cid-gx5ugnmk>  <a href="/philosophy" data-astro-cid-gx5ugnmk> <p class="!text-neutral-50 text-xs md:text-sm font-semibold relative after:bg-neutral-50 after:absolute after:h-[2px] after:w-0 after:bottom-0 after:left-0 hover:after:w-full after:transition-all after:duration-300 cursor-pointer" data-astro-cid-gx5ugnmk>Philosophy</p> </a> </div> </div> </div>  <div class="screen p-4 flex justify-center items-center z-10 rounded-md h-14 w-52 screen-bg-nav colors-card-2" id="card2" data-astro-cid-gx5ugnmk data-astro-transition-scope="astro-bmxrwhcs-4"> <div class="screen-image-east" data-astro-cid-gx5ugnmk></div> <div class="" data-astro-cid-gx5ugnmk></div> <div class="" data-astro-cid-gx5ugnmk> <!-- <i class="screen-icon">ICON</i> --> <div class="screen-user" data-astro-cid-gx5ugnmk>  <a href="/poetry" data-astro-cid-gx5ugnmk> <p class="!text-neutral-50 text-xs md:text-sm font-semibold relative after:bg-neutral-50 after:absolute after:h-[2px] after:w-0 after:bottom-0 after:left-0 hover:after:w-full after:transition-all after:duration-300 cursor-pointer" data-astro-cid-gx5ugnmk>Poetry</p> </a> </div> </div> </div>  <div class="screen p-4 flex justify-center items-center z-10 rounded-md h-14 w-52 screen-bg-nav colors-card-3" id="card3" data-astro-cid-gx5ugnmk data-astro-transition-scope="astro-bmxrwhcs-5"> <div class="screen-image-south" data-astro-cid-gx5ugnmk></div> <div class="" data-astro-cid-gx5ugnmk></div> <div class="" data-astro-cid-gx5ugnmk> <!-- <i class="screen-icon">ICON</i> --> <div class="screen-user" data-astro-cid-gx5ugnmk>  <a href="/programming" data-astro-cid-gx5ugnmk> <p class="!text-neutral-50 text-xs md:text-sm font-semibold relative after:bg-neutral-50 after:absolute after:h-[2px] after:w-0 after:bottom-0 after:left-0 hover:after:w-full after:transition-all after:duration-300 cursor-pointer" data-astro-cid-gx5ugnmk>Programming</p> </a> </div> </div> </div>  <div class="screen p-4 flex justify-center items-center z-10 rounded-md h-14 w-52 screen-bg-nav colors-card-4" id="card4" data-astro-cid-gx5ugnmk data-astro-transition-scope="astro-bmxrwhcs-6"> <div class="screen-image-west" data-astro-cid-gx5ugnmk></div> <div class="" data-astro-cid-gx5ugnmk></div> <div class="" data-astro-cid-gx5ugnmk> <!-- <i class="screen-icon">ICON</i> --> <div class="screen-user" data-astro-cid-gx5ugnmk>  <a href="/economy" data-astro-cid-gx5ugnmk> <p class="!text-neutral-50 text-xs md:text-sm font-semibold relative after:bg-neutral-50 after:absolute after:h-[2px] after:w-0 after:bottom-0 after:left-0 hover:after:w-full after:transition-all after:duration-300 cursor-pointer" data-astro-cid-gx5ugnmk>Economy</p> </a> </div> </div> </div>  </nav> <main> <div class="flex flex-col min-h-[88vh] mb-20 md:mb-0">  <div class="flex flex-col relative"> <div class="fixed max-w-none w-full scale-110 -translate-y-24 before:absolute before:left-0 before:right-0 before:top-0  before:z-10 before:h-full before:w-full before:bg-white h-full before:opacity-30"> <img src="/static/images/purple2.webp" alt="Image" class="absolute h-screen w-full object-cover z-0"> </div> <div class="z-10">  <div class="absolute inset-0 bg-[url(/static/svg/grid.svg)] -z-10 bg-top [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0.5))]"></div> <div class="xl:fixed xl:translate-y-[76px] 2xl:left-20 xl:left-0 lg:top-5 left-1 flex justify-center mt-4 z-10">  <div class="bg-white p-4 rounded-md min-h-[300px] max-h-[500px] overflow-y-scroll custom-scrollbar w-72 shadow-xl" id="scriptbook" data-astro-transition-scope="astro-dnezuqfu-2"> <ul> <li> <a href="/programming/scriptbook/2024-01-20_possible-cidr-ips/" class="text-blue-500 hover:text-blue-700 hover:underline"> Possible CIDR IPs </a> </li><li> <a href="/programming/scriptbook/expressjs-basic-crud/" class="text-blue-500 hover:text-blue-700 hover:underline"> Express.js Basic CRUD &amp; Routing </a> </li><li> <a href="/programming/scriptbook/gcp-app-engine/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP App Engine </a> </li><li> <a href="/programming/scriptbook/gcp-bigquery/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP BigQuery </a> </li><li> <a href="/programming/scriptbook/gcp-disks/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP Disks </a> </li><li> <a href="/programming/scriptbook/gcp-iam/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP IAM </a> </li><li> <a href="/programming/scriptbook/gcp-kubernetes/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP Kubernetes </a> </li><li> <a href="/programming/scriptbook/gcp-lb/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP Load Balancing </a> </li><li> <a href="/programming/scriptbook/gcp-logging-monitoring/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP Logging And Monitoring </a> </li><li> <a href="/programming/scriptbook/gcp-networks-interconnect/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP Interconnect </a> </li><li> <a href="/programming/scriptbook/gcp-networks/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP Network </a> </li><li> <a href="/programming/scriptbook/gcp-pubsub/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP PubSub </a> </li><li> <a href="/programming/scriptbook/gcp-resource-management/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP Resource Management </a> </li><li> <a href="/programming/scriptbook/gcp-shell/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP Cloud Shell </a> </li><li> <a href="/programming/scriptbook/gcp-sql/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP Cloud SQL </a> </li><li> <a href="/programming/scriptbook/gcp-storage/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP Storage </a> </li><li> <a href="/programming/scriptbook/gcp-terraform/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP Terraform </a> </li><li> <a href="/programming/scriptbook/gcp-vm/" class="text-blue-500 hover:text-blue-700 hover:underline"> GCP VM </a> </li><li> <a href="/programming/scriptbook/git-handy-cmnds/" class="text-blue-500 hover:text-blue-700 hover:underline"> Handy Git Commands </a> </li><li> <a href="/programming/scriptbook/nextjs-combining-server-and-client-components/" class="text-blue-500 hover:text-blue-700 hover:underline"> Next.js Combining Server and Client Components </a> </li><li> <a href="/programming/scriptbook/nodejs-essentials/" class="text-blue-500 hover:text-blue-700 hover:underline"> Node.js Essentials </a> </li><li> <a href="/programming/scriptbook/rust-basics/" class="text-blue-500 hover:text-blue-700 hover:underline"> Rust Basics </a> </li><li> <a href="/programming/scriptbook/rust-ownership/" class="text-blue-500 hover:text-blue-700 hover:underline"> Rust Ownership </a> </li><li> <a href="/programming/scriptbook/rust-resources/" class="text-blue-500 hover:text-blue-700 hover:underline"> Rust Resources </a> </li><li> <a href="/programming/scriptbook/rust-struct/" class="text-blue-500 hover:text-blue-700 hover:underline"> Rust Struct </a> </li> </ul> </div> <!-- <style>
    /* TODO fix scrollbar on menu not being preserved! */
    /* div#scriptbook {
        overflow: hidden;
    } */

    div#scriptbook > ul {
        overflow-y: auto;
    }
</style> --> </div> <div class="z-30 flex justify-center mt-12 pb-12" data-astro-transition-scope="astro-qtsawvgs-1"> <div class="px-1 lg:px-32 py-8 shadow-xl border border-1 border-gray-300/50 bg-white"> <div class="prose lg:prose-lg prose-h1:font-bold dark:prose text-slate-800 prose-headings:text-slate-800 prose-code:text-inherit prose-a:text-inherit prose-li:my-0 prose-ul:my-0 prose-headings:mb-0">   <h1 id="rust-ownership">Rust Ownership</h1>
<p>Rust ownership is unique feature in Rust to manage memory without automatic garbage collection (slows the program down at runtime) or explicit, manual memory allocation (intense workflow for programmers).</p>
<p>Ownership Rules:</p>
<ul>
<li>Each value in Rust has an <em>owner</em>.</li>
<li>There can only be one owner at a time.</li>
<li>When the owner goes out of scope, the value will be dropped.</li>
</ul>
<h3 id="example-with-string-type">Example with <code>String</code> type</h3>
<p>String literals are immutable, but not every string can be known when we write our code (e.g. user input). Hence, the <code>String</code> type is made to manage data allocated on the heap and deal with unknown data. To create a <code>String</code> from a string literal, use the <code>from</code> function, as below:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="rust"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> s </span><span style="color:#F97583">=</span><span style="color:#B392F0"> String</span><span style="color:#F97583">::</span><span style="color:#B392F0">from</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"hello"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span></code></pre>
<p>The double colon <code>::</code> enables us to namespace this particular <code>from</code> function under the <code>String</code> type rather than using some sort of name like <code>string_from</code>.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="rust"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#F97583"> mut</span><span style="color:#E1E4E8"> s </span><span style="color:#F97583">=</span><span style="color:#B392F0"> String</span><span style="color:#F97583">::</span><span style="color:#B392F0">from</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"hello"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">s</span><span style="color:#F97583">.</span><span style="color:#B392F0">push_str</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">", world!"</span><span style="color:#E1E4E8">); </span><span style="color:#6A737D">// push_str() is built-in function</span></span>
<span class="line"><span style="color:#B392F0">println!</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"{}"</span><span style="color:#E1E4E8">, s);</span></span>
<span class="line"></span></code></pre>
<p>Rust’s particular path is that memory is automatically returned once the variable that owns it goes out of scope. For example:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="rust"><code><span class="line"><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#F97583">	let</span><span style="color:#E1E4E8"> s </span><span style="color:#F97583">=</span><span style="color:#B392F0"> String</span><span style="color:#F97583">::</span><span style="color:#B392F0">from</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"hello"</span><span style="color:#E1E4E8">); </span><span style="color:#6A737D">// s is valid from this point forward</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">	// do stuff with s</span></span>
<span class="line"><span style="color:#E1E4E8">}                                  </span><span style="color:#6A737D">// this scope is now over, and s is no</span></span>
<span class="line"><span style="color:#6A737D">								   // longer valid</span></span>
<span class="line"></span></code></pre>
<p>Rust automatically calls <code>drop</code> function for any variable that goes out of scope.</p>
<h3 id="functions-and-ownership">Functions and Ownership</h3>
<p>When inserting a variable into a function, the variable’s value <em>moves into the function</em> and is no longer valid outside that function in the present code. However, if using variables with <code>Copy</code> traits, the variable is still valid afterwards.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="rust"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> s </span><span style="color:#F97583">=</span><span style="color:#B392F0"> String</span><span style="color:#F97583">::</span><span style="color:#B392F0">from</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"hello"</span><span style="color:#E1E4E8">); </span><span style="color:#6A737D">// s comes into scope </span></span>
<span class="line"><span style="color:#B392F0">takes_ownership</span><span style="color:#E1E4E8">(s); </span><span style="color:#6A737D">// s's value moves into the function... </span></span>
<span class="line"><span style="color:#6A737D">					// ... and so is no longer valid here </span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> x </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 5</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// x comes into scope </span></span>
<span class="line"><span style="color:#B392F0">makes_copy</span><span style="color:#E1E4E8">(x); </span><span style="color:#6A737D">// x would move into the function, </span></span>
<span class="line"><span style="color:#6A737D">				// but i32 is Copy, so it's okay to still </span></span>
<span class="line"><span style="color:#6A737D">				// use x afterward</span></span>
<span class="line"></span></code></pre>
<p>The ownership of a variable follows the same pattern every time: assigning a value to another variable moves it.</p>
<p>But what if you don’t want to transfer ownership back and forth every time you want a function to use a certain variable? Rust has a feature for using a value without transferring ownership called <em>references</em>.</p>
<h3 id="references-and-borrowing">References and Borrowing</h3>
<p>Instead of passing in the variable to a function, causing it to take ownership of it, one can instead insert a reference to the variable using <code>&#x26;</code> - e.g. <code>function(&#x26;variable)</code>.</p>
<blockquote>
<p>A <em>reference</em> is like a pointer in that it’s an address we can follow to access the data stored at that address; that data is owned by some other variable. Unlike a pointer, a reference is guaranteed to point to a valid value of particular type for the life of that reference.</p>
</blockquote>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="rust"><code><span class="line"><span style="color:#F97583">fn</span><span style="color:#B392F0"> main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> s1 </span><span style="color:#F97583">=</span><span style="color:#B392F0"> String</span><span style="color:#F97583">::</span><span style="color:#B392F0">from</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"hello"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> len </span><span style="color:#F97583">=</span><span style="color:#B392F0"> calculate_length</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">&#x26;</span><span style="color:#E1E4E8">s1);</span></span>
<span class="line"><span style="color:#B392F0">    println!</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"The length of '{}' is {}."</span><span style="color:#E1E4E8">, s1, len);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">fn</span><span style="color:#B392F0"> calculate_length</span><span style="color:#E1E4E8">(s</span><span style="color:#F97583">:</span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">-></span><span style="color:#B392F0"> usize</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    s</span><span style="color:#F97583">.</span><span style="color:#B392F0">len</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>The difference with references is that because ownership is not transferred, the value that the reference points to will not be dropped when the reference stops being used. So a function can use a variable by reference and when that function is done with the reference, the value of that variable will still be there. This act of creating references is called <em>borrowing</em>.</p>
<p>Borrowing means also that you <em>cannot modify</em> the variable. References, like variables by default, are immutable (one could say read-only).</p>
<p>Yet, you can make borrowing mutable by adding a <code>mut</code> operator after the <code>&#x26;</code> to create a <em>mutable reference</em>. However, there is one major restriction to this: you can only make a single mutable reference <em>within the same scope</em>, not multiple. No other reference is allowed to make changes. Two or more mutable references of the same variable will fail. If you make multiple references that are each in different scopes, then that’s fine.</p>
<p>Another matter to consider is that you cannot have <em>both</em> immutable and mutable reference in the same scope.</p>
<blockquote>
<p>Users of an immutable reference don’t expect the value to suddenly change out from under them! However, multiple immutable references are allowed because no one who is just reading the data has the ability to affect anyone else’s reading of the data</p>
</blockquote>
<p>Note that the scope of a reference begins from the moment it’s created to the last time it’s used in the program. If after the last usage, a mutable reference is created, that’s fine, as long as the immutable reference isn’t used again after the mutable one.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="rust"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#F97583"> mut</span><span style="color:#E1E4E8"> s </span><span style="color:#F97583">=</span><span style="color:#B392F0"> String</span><span style="color:#F97583">::</span><span style="color:#B392F0">from</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"hello"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> r1 </span><span style="color:#F97583">=</span><span style="color:#F97583"> &#x26;</span><span style="color:#E1E4E8">s; </span><span style="color:#6A737D">// no problem</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> r2 </span><span style="color:#F97583">=</span><span style="color:#F97583"> &#x26;</span><span style="color:#E1E4E8">s; </span><span style="color:#6A737D">// no problem</span></span>
<span class="line"><span style="color:#B392F0">println!</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"{} and {}"</span><span style="color:#E1E4E8">, r1, r2);</span></span>
<span class="line"><span style="color:#6A737D">// variables r1 and r2 will not be used after this point</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> r3 </span><span style="color:#F97583">=</span><span style="color:#F97583"> &#x26;mut</span><span style="color:#E1E4E8"> s; </span><span style="color:#6A737D">// no problem</span></span>
<span class="line"><span style="color:#B392F0">println!</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"{}"</span><span style="color:#E1E4E8">, r3);</span></span>
<span class="line"></span></code></pre>
<p>Mutability is therefore highly controlled in Rust. The benefit of this is that Rust prevents <em>data race</em> (similar to <em>race conditions</em>), which happens when these three behaviours occur:</p>
<ul>
<li>Two or more pointers access the same data at the same time.</li>
<li>At least one of the pointers is being used to write to the data.</li>
<li>There’s no mechanism being used to synchronize access to the data.</li>
</ul>
<h3 id="slice-type">Slice Type</h3>
<p>A slice is a reference to part of a variable. In the case of a <code>String</code>, it would be a portion of the string. Slices are created using a range within brackets specifying <code>[starting_index..ending_index]</code>, where <code>starting_index</code> is the first position in the slice and <code>ending_index</code> is <em>one more than the last position in the slice</em>.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="rust"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> s </span><span style="color:#F97583">=</span><span style="color:#B392F0"> String</span><span style="color:#F97583">::</span><span style="color:#B392F0">from</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"hello world"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> hello </span><span style="color:#F97583">=</span><span style="color:#F97583"> &#x26;</span><span style="color:#E1E4E8">s[</span><span style="color:#79B8FF">0</span><span style="color:#F97583">..</span><span style="color:#79B8FF">5</span><span style="color:#E1E4E8">];</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> world </span><span style="color:#F97583">=</span><span style="color:#F97583"> &#x26;</span><span style="color:#E1E4E8">s[</span><span style="color:#79B8FF">6</span><span style="color:#F97583">..</span><span style="color:#79B8FF">11</span><span style="color:#E1E4E8">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// in the case of `let world = &#x26;s[6..11];`, `world` would be a slice that contains a pointer to the byte at index 6 of `s` with a length value of `5`.</span></span>
<span class="line"></span></code></pre>
<p>If you want to start at index zero, you can just use <code>&#x26;s[..2]</code>. Likewise, if the slice includes the last index, you can just employ <code>&#x26;s[3..]</code>.</p>
<p>Example using the flexibility of <code>&#x26;str</code> instead of <code>&#x26;String</code> in the function signature.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="rust"><code><span class="line"><span style="color:#F97583">fn</span><span style="color:#B392F0"> main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> my_string </span><span style="color:#F97583">=</span><span style="color:#B392F0"> String</span><span style="color:#F97583">::</span><span style="color:#B392F0">from</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"hello world"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // `first_word` works on slices of `String`s, whether partial or whole</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> word </span><span style="color:#F97583">=</span><span style="color:#B392F0"> first_word</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">&#x26;</span><span style="color:#E1E4E8">my_string[</span><span style="color:#79B8FF">0</span><span style="color:#F97583">..</span><span style="color:#79B8FF">6</span><span style="color:#E1E4E8">]);</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> word </span><span style="color:#F97583">=</span><span style="color:#B392F0"> first_word</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">&#x26;</span><span style="color:#E1E4E8">my_string[</span><span style="color:#F97583">..</span><span style="color:#E1E4E8">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // `first_word` also works on references to `String`s, which are equivalent</span></span>
<span class="line"><span style="color:#6A737D">    // to whole slices of `String`s</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> word </span><span style="color:#F97583">=</span><span style="color:#B392F0"> first_word</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">&#x26;</span><span style="color:#E1E4E8">my_string);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> my_string_literal </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "hello world"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // `first_word` works on slices of string literals, whether partial or whole</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> word </span><span style="color:#F97583">=</span><span style="color:#B392F0"> first_word</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">&#x26;</span><span style="color:#E1E4E8">my_string_literal[</span><span style="color:#79B8FF">0</span><span style="color:#F97583">..</span><span style="color:#79B8FF">6</span><span style="color:#E1E4E8">]);</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> word </span><span style="color:#F97583">=</span><span style="color:#B392F0"> first_word</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">&#x26;</span><span style="color:#E1E4E8">my_string_literal[</span><span style="color:#F97583">..</span><span style="color:#E1E4E8">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Because string literals *are* string slices already,</span></span>
<span class="line"><span style="color:#6A737D">    // this works too, without the slice syntax!</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> word </span><span style="color:#F97583">=</span><span style="color:#B392F0"> first_word</span><span style="color:#E1E4E8">(my_string_literal);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">fn</span><span style="color:#B392F0"> first_word</span><span style="color:#E1E4E8">(s</span><span style="color:#F97583">:</span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0">str</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">-></span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0">str</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> bytes </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> s</span><span style="color:#F97583">.</span><span style="color:#B392F0">as_bytes</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> (i, </span><span style="color:#F97583">&#x26;</span><span style="color:#E1E4E8">item) </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> bytes</span><span style="color:#F97583">.</span><span style="color:#B392F0">iter</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">.</span><span style="color:#B392F0">enumerate</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> item </span><span style="color:#F97583">==</span><span style="color:#9ECBFF"> b' '</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">            return</span><span style="color:#F97583"> &#x26;</span><span style="color:#E1E4E8">s[</span><span style="color:#79B8FF">0</span><span style="color:#F97583">..</span><span style="color:#E1E4E8">i];</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#F97583">    &#x26;</span><span style="color:#E1E4E8">s[</span><span style="color:#F97583">..</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>   </div> </div> </div>  </div> </div>  </div> <div class="relative"> <div class="z-30 absolute bottom-0 left-[50%] transform -translate-x-1/2 translate-y-1/2"> <div class="glass rounded-lg p-2"> <p class="text-xs">© Filip Niklas 2024. All poetry rights reserved. Permission is hereby granted to freely copy and use notes about programming and any code.</p> </div> <div class="h-4"></div> </div> </div> </main>   </body> </html> <script>
/**
 * Thanks to Astro Paper for this code. See:
 * https://github.com/satnaing/astro-paper/blob/main/src/layouts/PostDetails.astro
 */
/** Attaches copy buttons to code blocks in the document,
   * allowing users to copy code easily. */
    function attachCopyButtons() {
        let copyButtonLabel = "Copy";
        let codeBlocks = Array.from(document.querySelectorAll("pre"));

        for (let codeBlock of codeBlocks) {
            let wrapper = document.createElement("div");
            wrapper.style.position = "relative";

            let copyButton = document.createElement("button");
            copyButton.className =
                "copy-code absolute right-3 -top-3 rounded bg-slate-200 hover:bg-slate-400  px-2 py-1 text-xs leading-4 text-black font-medium";
            copyButton.innerHTML = copyButtonLabel;
            codeBlock.setAttribute("tabindex", "0");
            codeBlock.appendChild(copyButton);

            // wrap codebock with relative parent element
            codeBlock.parentNode.insertBefore(wrapper, codeBlock);
            wrapper.appendChild(codeBlock);

            copyButton.addEventListener("click", async () => {
                await copyCode(codeBlock, copyButton);
            });
        }

        async function copyCode(block, button) {
            let code = block.querySelector("code");
            let text = code.innerText;

            await navigator.clipboard.writeText(text);

            // visual feedback that task is completed
            button.innerText = "Copied!";

            setTimeout(() => {
                button.innerText = copyButtonLabel;
            }, 2000);
        }
    }
        
    attachCopyButtons();
    document.addEventListener("astro:after-swap", attachCopyButtons);
</script>